@model FileToEmailLinker.Models.InputModels.MailPlans.MailPlanInputModel

@{
    ViewData["Title"] = "Edit";
    var today = DateOnly.FromDateTime(DateTime.Now.Date);
}

<div class="container">
    <h1>Modifica Programmazione @Model.Name</h1>
    <hr />
    <form asp-action="Edit" method="post">
        <div asp-validation-summary="All" class="text-danger"></div>

        <partial name="/Views/Shared/Input/_InformazioniGeneraliInput.cshtml" model="@Model"></partial>

        <partial name="/Views/Shared/Input/_SelezioneAllegati.cshtml" model="@Model.FileSelectList"></partial>

        <partial name="/Views/Shared/Input/_SelezioneDestinatari.cshtml" model="@Model.ReceiverSelectList"></partial>

        <div>
            <hr />
            <h6>Selezionare il tipo di schedulazione:</h6>
            <div class="mb-3">
                <a class="btn btn-outline-primary" asp-action="AddWeeklyScheduleInputModel" data-ajax="true" data-ajax-mode="replace" data-ajax-update="#schedulationSelection">Settimanale<i class="bi bi-calendar-day ms-2"></i></a>
                <a class="btn btn-outline-primary" asp-action="AddMonthlyScheduleInputModel" aps-route-schedType="monthly" data-ajax="true" data-ajax-mode="replace" data-ajax-update="#schedulationSelection">Mensile<i class="bi bi-calendar-week ms-2"></i></a>
            </div>
            <div id="schedulationSelection">
                <!--Partial View area-->
                @if(Model.WeeklySchedulation != null)
                {
                    <partial name="/Views/Schedulations/_WeeklySchedulation.cshtml" model="@Model.WeeklySchedulation"></partial>
                }else
                {
                    <partial name="/Views/Schedulations/_MonthlySchedulation.cshtml" model="@Model.MonthlySchedulation"></partial>
                }
            </div>
            <hr />
            <div class="form-group">
                <input type="submit" value="Modifica" class="btn btn-primary" />
                <a class="btn btn-outline-secondary ms-2" role="button" asp-action="Details" asp-route-id="@Model.Id">Annulla</a>
            </div>
        </div>
    </form>
</div>

<div>
    <a asp-action="Index">Back to List</a>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
